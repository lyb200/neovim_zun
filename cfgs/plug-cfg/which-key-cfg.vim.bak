" ------------------------------------------------------------------------------
" ====== Plug - which-key
" -------------------------
" <BackSpace> 退回到上一层
" <ESC> 退出which-key
" ------------------------------------------------------------------------------

" 注册键位与对应的字典，不然会找不到典而报错undefine
call which_key#register('<Space>', "g:which_key_map")
call which_key#register(',', "g:local_which_key_map")
" Define prefix dictionary(leader)
let g:which_key_map = {}
" let g:which_key_sep = '→'

" Define prefix dictionary(localleader)
let g:local_which_key_map = {}

nnoremap <silent> <leader> :WhichKey '<Space>'<CR>
nnoremap <silent> <localleader> :WhichKey ','<CR>
" by defaule timeoutlen is 1000 ms
set timeoutlen=500

" ------------------------------
" === <leader> key map
" ------------------------------

" 第一个元素表明执行的操作，第二个是该操作的介绍
" group
let g:which_key_map['f'] = {
      \ 'name' : '+Floaterm' ,
      \ 'a' : [':FloatermFirst<CR>' , 'FloatermFirst'],
      \ 'e' : [':FloatermLast<CR>' , 'FloatermLast'],
      \ 'f' : [':FloatermToggle<CR>' , 'FloatermToggle'],
      \ 'h' : [':FloatermHide<CR>' , 'FloatermHide'],
      \ 'k' : [':FloatermKill<CR>' , 'FloatermKill'],
      \ 'n' : [':FloatermNext<CR>' , 'FloatermNext'],
      \ 'p' : [':FloatermPrev<CR>' , 'FloatermPrev'],
      \ 'r' : [':FloatermNew ranger<CR>' , 'FloatermNew ranger'],
      \ 's' : [':FloatermShow<CR>' , 'FloatermShow'],
      \ 'z' : [':FloatermNew fzf<CR>' , 'FloatermNew fzf'],
      \ 'c' : [':FloatermNew<CR>' , 'FloatermNew'],
      \ }

let g:which_key_map['s'] = {
            \ 'name' : '+File/WindowSplit',
            \ 'f' : [':w<CR>' , 'Save File'],
            \ 'h' : ['h' , 'Window Split Left'],
            \ 'j' : ['j' , 'Window Split Below'],
            \ 'k' : ['k' , 'Window Split Up'],
            \ 'l' : ['l' , 'Window Split Right'],
            \ }

let g:which_key_map['w'] = {
            \ 'name' : '+CursorMoveBetweenWindows',
            \ 'h' : ['h' , 'Cursor move to left window'],
            \ 'j' : ['j' , 'Cursor move to below window'],
            \ 'k' : ['k' , 'Cursor move to up window'],
            \ 'l' : ['l' , 'Cursor move to left window'],
            \ }


" ------------------------------
" === ignore key map
" ------------------------------
"
"  ignore single key map
let g:which_key_map.1 = 'which_key_ignore'
let g:which_key_map.2 = 'which_key_ignore'
let g:which_key_map.3 = 'which_key_ignore'
let g:which_key_map.4 = 'which_key_ignore'
let g:which_key_map.5 = 'which_key_ignore'
let g:which_key_map.6 = 'which_key_ignore'
let g:which_key_map.7 = 'which_key_ignore'
let g:which_key_map.8 = 'which_key_ignore'
let g:which_key_map.9 = 'which_key_ignore'
let g:which_key_map['-'] = 'which_key_ignore'
let g:which_key_map['='] = 'which_key_ignore'

" ignore group key map
let g:which_key_map['d'] = {'name' : 'which_key_ignore'}


" ------------------------------
" === <localleader> key map
" ------------------------------

let g:local_which_key_map['d'] = {
            \ 'name' : '+Debug',
            \ 'a' : ['a' , 'Add breakpoint(Go debug Delve)'],
            \ 'c' : ['c' , 'Clear all breakpoint(Go debug Delve)'],
            \ 'd' : ['d' , 'Remove breakpoint(Go debug Delve)'],
            \ 'i' : ['i' , 'Add toggle breakpoint(Go debug Delve)'],
            \ 'r' : ['r' , 'Remove trace breakpoint(Go debug Delve)'],
            \ 's' : ['s' , 'Start debug(Go debug Delve)'],
            \ 't' : ['t' , 'Add trace breakpoint(Go debug Delve)'],
            \ 'v' : ['v' , 'Show delve version(Go debug Delve)']
            \}
